package proyecto3;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;


public class Nivel {
	protected Posicion grilla[][];
	protected int nivel;
	protected String pathMapa;
	
	public Posicion[][] getGrilla() {
		return grilla;
	}
	public void setGrilla(Posicion grilla[][]) {
		this.grilla = grilla;
	}
	public Posicion getPosicionGrilla(int fila, int columna) {
		return grilla[fila][columna];
	}
	public int getNivel() {
		return nivel;
	}
	public void setNivel(int nivel) {
		this.nivel = nivel;
	}
	
	public void cargarGrilla() throws IOException {
		File mapa = new File(pathMapa);
	    Scanner leer= new Scanner(mapa);
	    String linea;
	    char[] lineaChar= new char[5];
		for(int f=0;f<grilla.length;f++) {
			if (leer.hasNextLine()) {
	           linea=leer.nextLine();
	           lineaChar=linea.toCharArray();
	           for(int c=0;c<lineaChar.length;c++)
	        	   grilla[f][c]=traducirCaracter(lineaChar[c],f,c);
			}
		}
		leer.close();
	}
	/**
	 * Punto chico  -> '*'
	 * Punto grande -> '#'
	 * Poder -> 'P'
	 * Pocion -> 'V'
	 * Pared -> 'X'
	 * @param c
	 * @return
	 */
	private Posicion traducirCaracter(char c, int fila, int colum) {
		Posicion pos = null;
		PickUp pu;
		switch(c) {
		
			case '*':
				pu=PickUpFactory.createPuntosChicos();
				pos=new Posicion(fila,colum,true,pu);
			break;
			
			case '#':
				pu=PickUpFactory.createPuntosGrandes();
				pos=new Posicion(fila,colum,true,pu);
			break;
			
			case 'X':
				pos=new Posicion(fila,colum,false,null);
			break;
			
			case 'V':
				pu=PickUpFactory.createPocion();
				pos=new Posicion(fila,colum,true,pu);
			break;
			case 'P':
				pu=PickUpFactory.createPoder();
				pos=new Posicion(fila,colum,true,pu);
			break;
		}
		return pos;
	}
}
